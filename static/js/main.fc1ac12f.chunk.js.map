{"version":3,"sources":["components/AuthRoute.tsx","components/Navbar.jsx","components/Footer.jsx","pages/index/components/Slides.jsx","hooks/api.tsx","pages/index/components/Articles.tsx","pages/index/components/Notifications.tsx","pages/index/components/NotificationsMobile.tsx","pages/index/Index.tsx","App.tsx","serviceWorker.js","index.tsx","context/Reducer.js","context/GlobalState.tsx","components/LoginDialog.jsx","types.ts"],"names":["LoginAlert","maxWidth","variant","severity","action","NotAuthorizedAlert","AuthRoute","children","path","pageAccessCode","authInfo","useContext","authInfoContext","loggedIn","userAccessCode","canAccess","accessCode","useStyles","makeStyles","theme","root","flexGrow","width","offset","mixins","toolbar","logo","display","breakpoints","up","pages","label","PageLabel","Index","to","PagePath","About","Repair","Check","Wechat","Lanke","Suggest","Complain","NavBar","classes","pathname","useLocation","React","useState","currentPage","setCurrentPage","anchorEl","setAnchorEl","useEffect","firstLevelPath","slashIndex","indexOf","slice","indexMatch","findIndex","page","includes","handleCloseUserMenu","className","AppBar","position","color","Grid","container","item","xs","src","process","alt","height","style","top","left","Tabs","value","indicatorColor","textColor","scrollButtons","map","index","Tab","key","component","Link","sm","Divider","orientation","textAlign","IconButton","onClick","event","currentTarget","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","MenuItem","ListItemIcon","LoginDialog","Copyright","Typography","align","href","Date","getFullYear","footer","padding","spacing","bottom","marginTop","backgroundColor","palette","primary","light","StickyFooter","Container","AutoPlaySwipeableViews","autoPlay","SwipeableViews","slide","margin","img","Slides","Skeleton","useGetArticlesV1","props","useGet","pagination","ArticleSkeleton","numPerPage","ArticleList","setOffset","res","queryParams","data","Paper","List","subheader","ListSubheader","disableSticky","ListItem","button","divider","ListItemText","title","primaryTypographyProps","secondary","content","secondaryTypographyProps","limit","total","e","newOffset","marginRight","NestedList","elevation","dense","reduced","PaperSheet","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","justify","Hidden","smUp","md","xsDown","NotFoundPage","lazy","AboutPage","CheckPage","ComplainPage","LankePage","RepairPage","SuggestPage","WechatPage","AdminPage","App","darkThemeSys","useMediaQuery","noSsr","createMuiTheme","main","type","GlobalState","CssBaseline","minHeight","fallback","CircularProgress","exact","IndexPage","AdminAccess","Dashboard","Admin","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","initialState","userId","identity","Identity","None","expires","userReducer","state","localStorage","setItem","token","ROOT","removeItem","createContext","login","logout","useReducer","getItem","dispatch","Provider","base","setOpen","context","handleClickOpen","handleClose","handleLogout","fullWidth"],"mappings":"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","file":"static/js/main.fc1ac12f.chunk.js","sourcesContent":["import { Alert } from \"@material-ui/lab\";\nimport React, { useContext } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { authInfoContext } from \"../context/GlobalState\";\nimport { AuthRouteProps, GlobalContextProps } from \"../types\";\nimport LoginDialog from \"./LoginDialog\";\nimport { Container } from \"@material-ui/core\";\n\nfunction canAccess(pageAccessCode: number, userAccessCode: number): boolean {\n  return (pageAccessCode & userAccessCode) !== 0;\n}\n\nfunction LoginAlert(): JSX.Element {\n  return (\n    <Container maxWidth=\"sm\">\n      <Alert variant=\"outlined\" severity=\"warning\" action={<LoginDialog />}>\n        您需要先登陆才能访问此页面！\n      </Alert>\n    </Container>\n  );\n}\n\nfunction NotAuthorizedAlert(): JSX.Element {\n  return (\n    <Container maxWidth=\"sm\">\n      <Alert variant=\"outlined\" severity=\"error\">\n        您没有权限访问该页面！\n      </Alert>\n    </Container>\n  );\n}\n\nexport const AuthRoute: React.FC<AuthRouteProps> = ({\n  children,\n  path,\n  pageAccessCode\n}) => {\n  const context = useContext<GlobalContextProps>(authInfoContext);\n  const { authInfo } = context;\n\n  return (\n    <Route\n      path={path}\n      // eslint-disable-next-line react/no-children-prop\n      children={(): JSX.Element => {\n        if (\n          !authInfo.loggedIn ||\n          !canAccess(pageAccessCode, authInfo.accessCode)\n        ) {\n          return authInfo.loggedIn ? <NotAuthorizedAlert /> : <LoginAlert />;\n        }\n        return children;\n      }}\n    />\n  );\n};\n","import {\n  Divider,\n  Grid,\n  IconButton,\n  AppBar,\n  Tabs,\n  Tab,\n  makeStyles,\n  Menu,\n  MenuItem,\n  ListItemIcon\n} from \"@material-ui/core\";\nimport AccountIcon from \"@material-ui/icons/AccountCircle\";\nimport AppsIcon from \"@material-ui/icons/Apps\";\nimport React, { useEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport LoginDialog from \"./LoginDialog\";\nimport { PageLabel, PagePath } from \"../types\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    width: \"100%\"\n  },\n  offset: theme.mixins.toolbar,\n  logo: {\n    display: \"none\",\n    [theme.breakpoints.up(\"sm\")]: {\n      display: \"block\"\n    }\n  }\n}));\n\nconst pages = [\n  { label: PageLabel.Index, to: PagePath.Index },\n  { label: PageLabel.About, to: PagePath.About },\n  { label: PageLabel.Repair, to: PagePath.Repair },\n  { label: PageLabel.Check, to: PagePath.Check },\n  { label: PageLabel.Wechat, to: PagePath.Wechat },\n  { label: PageLabel.Lanke, to: PagePath.Lanke },\n  { label: PageLabel.Suggest, to: PagePath.Suggest },\n  { label: PageLabel.Complain, to: PagePath.Complain }\n];\n\nexport default function NavBar() {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const [currentPage, setCurrentPage] = React.useState(0);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  useEffect(() => {\n    // 导航栏匹配一级路由\n    /*\n      /about      -> /about\n      /about/     -> /about\n      /about/123  -> /about\n    */\n    let firstLevelPath = pathname;\n    const slashIndex = firstLevelPath.indexOf(\"/\", 1);\n    if (slashIndex !== -1) {\n      firstLevelPath = firstLevelPath.slice(0, slashIndex);\n    }\n\n    const indexMatch = pages.findIndex(page => firstLevelPath === page.to);\n    setCurrentPage(indexMatch);\n  }, [pathname]);\n\n  if (pathname.includes(\"admin\")) {\n    return null;\n  }\n\n  const handleOpenUserMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseUserMenu = () => {\n    setAnchorEl(null);\n  };\n\n  function AccountMenu() {\n    return (\n      <Menu\n        id=\"menu-appbar\"\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\"\n        }}\n        keepMounted\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\"\n        }}\n        open={Boolean(anchorEl)}\n        onClose={handleCloseUserMenu}\n      >\n        <MenuItem onClick={handleCloseUserMenu} component={Link} to=\"/admin\">\n          <ListItemIcon>\n            <AppsIcon />\n          </ListItemIcon>\n          后台\n        </MenuItem>\n        <LoginDialog />\n      </Menu>\n    );\n  }\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"fixed\" color=\"primary\">\n        <Grid container>\n          <Grid item xs={1} className={classes.logo}>\n            <img\n              src={`${process.env.PUBLIC_URL}/images/Logo_small_3.png`}\n              alt=\"logo\"\n              height={40}\n              style={{ position: \"relative\", top: 8, left: 4 }}\n            />\n          </Grid>\n          <Grid item xs={10}>\n            <Tabs\n              value={currentPage}\n              indicatorColor=\"secondary\"\n              textColor=\"inherit\"\n              variant=\"scrollable\"\n              scrollButtons=\"auto\"\n            >\n              {pages.map((page, index) => (\n                <Tab\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={index}\n                  label={page.label}\n                  component={Link}\n                  to={page.to}\n                />\n              ))}\n            </Tabs>\n          </Grid>\n          <Grid item sm={1} xs={2}>\n            <Divider orientation=\"vertical\" style={{ position: \"absolute\" }} />\n            <div style={{ textAlign: \"center\" }}>\n              <IconButton onClick={handleOpenUserMenu}>\n                <AccountIcon />\n              </IconButton>\n            </div>\n            <AccountMenu />\n          </Grid>\n        </Grid>\n      </AppBar>\n      <div className={classes.offset} />\n    </div>\n  );\n}\n","import Container from \"@material-ui/core/Container\";\nimport Link from \"@material-ui/core/Link\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {\"Copyright © \"}\n      <Link color=\"inherit\" href=\"http://lanunion.cqu.edu.cn/\">\n        重庆大学蓝盟\n      </Link>{\" \"}\n      {new Date().getFullYear()}\n    </Typography>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  footer: {\n    padding: theme.spacing(2),\n    bottom: 0,\n    marginTop: 100,\n    backgroundColor: theme.palette.primary.light\n  }\n}));\n\nexport default function StickyFooter() {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n\n  if (pathname.includes(\"admin\")) {\n    return null;\n  }\n\n  return (\n    <footer className={classes.footer}>\n      <Container maxWidth=\"sm\">\n        <Typography variant=\"body1\" align=\"center\" color=\"textPrimary\">\n          页脚\n        </Typography>\n        <Copyright />\n      </Container>\n    </footer>\n  );\n}\n","import { makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport { autoPlay } from \"react-swipeable-views-utils\";\n\nconst AutoPlaySwipeableViews = autoPlay(SwipeableViews);\n\nconst useStyles = makeStyles(() => ({\n  slide: {\n    margin: 15\n  },\n  img: {\n    width: \"100%\",\n    height: \"auto\"\n  }\n}));\n\nexport default function Slides() {\n  const classes = useStyles();\n\n  return (\n    <AutoPlaySwipeableViews>\n      {[1, 2, 3].map(item => (\n        <div className={classes.slide} key={item}>\n          <Skeleton variant=\"rect\" width=\"100%\" height=\"30vh\" />\n        </div>\n      ))}\n    </AutoPlaySwipeableViews>\n  );\n}\n","/* Generated by restful-react */\n\nimport React from \"react\";\nimport { Get, GetProps, useGet, UseGetProps } from \"restful-react\";\n\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n\nexport interface ArticleList {\n  data: { id: number; title: string; content?: string; time_stamp: number }[];\n  name?: string;\n}\n\nexport interface Article {\n  id: number;\n  title: string;\n  content?: string;\n  time_stamp: number;\n}\n\nexport interface NotificationList {\n  data: { id: number; title: string; content?: string; time_stamp: number }[];\n  name?: string;\n}\n\nexport interface Notification {\n  id: number;\n  title: string;\n  content?: string;\n  time_stamp: number;\n}\n\nexport interface Error {\n  response_code?: number;\n  info?: string;\n}\n\nexport interface GetArticlesV1Response {\n  data: { id: number; title: string; content?: string; time_stamp: number }[];\n  name?: string;\n}\n\nexport interface GetArticlesV1QueryParams {\n  offset: number;\n}\n\nexport type GetArticlesV1Props = Omit<\n  GetProps<\n    GetArticlesV1Response,\n    { response_code?: number; info?: string },\n    GetArticlesV1QueryParams\n  >,\n  \"path\"\n>;\n\n// 获取文章列表\nexport const GetArticlesV1 = (props: GetArticlesV1Props) => (\n  <Get<\n    GetArticlesV1Response,\n    { response_code?: number; info?: string },\n    GetArticlesV1QueryParams\n  >\n    path={`/articles`}\n    {...props}\n  />\n);\n\nexport type UseGetArticlesV1Props = Omit<\n  UseGetProps<GetArticlesV1Response, GetArticlesV1QueryParams>,\n  \"path\"\n>;\n\n// 获取文章列表\nexport const useGetArticlesV1 = (props: UseGetArticlesV1Props) =>\n  useGet<\n    GetArticlesV1Response,\n    { response_code?: number; info?: string },\n    GetArticlesV1QueryParams\n  >(`/articles`, props);\n\nexport interface GetNotificationsV1Response {\n  data: { id: number; title: string; content?: string; time_stamp: number }[];\n  name?: string;\n}\n\nexport interface GetNotificationsV1QueryParams {\n  offset: number;\n}\n\nexport type GetNotificationsV1Props = Omit<\n  GetProps<\n    GetNotificationsV1Response,\n    { response_code?: number; info?: string },\n    GetNotificationsV1QueryParams\n  >,\n  \"path\"\n>;\n\n// 获取通知列表\nexport const GetNotificationsV1 = (props: GetNotificationsV1Props) => (\n  <Get<\n    GetNotificationsV1Response,\n    { response_code?: number; info?: string },\n    GetNotificationsV1QueryParams\n  >\n    path={`/notifications`}\n    {...props}\n  />\n);\n\nexport type UseGetNotificationsV1Props = Omit<\n  UseGetProps<GetNotificationsV1Response, GetNotificationsV1QueryParams>,\n  \"path\"\n>;\n\n// 获取通知列表\nexport const useGetNotificationsV1 = (props: UseGetNotificationsV1Props) =>\n  useGet<\n    GetNotificationsV1Response,\n    { response_code?: number; info?: string },\n    GetNotificationsV1QueryParams\n  >(`/notifications`, props);\n","import { Paper, Divider } from \"@material-ui/core\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Pagination from \"material-ui-flat-pagination\";\nimport React, { useState } from \"react\";\nimport { useGetArticlesV1 } from \"../../../hooks/api\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: \"auto\",\n    width: \"100%\",\n    maxWidth: 500,\n    padding: theme.spacing(1)\n  },\n  pagination: {\n    textAlign: \"center\"\n  }\n}));\n\nconst ArticleSkeleton = (): JSX.Element => {\n  const item = (\n    <div style={{ padding: 10 }}>\n      <Skeleton height={30} width=\"20%\" />\n      <Skeleton height={20} width=\"90%\" />\n      <Skeleton height={20} width=\"90%\" />\n      <Divider />\n    </div>\n  );\n  return (\n    <>\n      {item}\n      {item}\n      {item}\n    </>\n  );\n};\n\nconst numPerPage = 6;\n\nexport default function ArticleList(): JSX.Element {\n  const classes = useStyles();\n  const [offset, setOffset] = useState<number>(0);\n  const { data: res } = useGetArticlesV1({\n    queryParams: {\n      offset: 0\n    }\n  });\n\n  return (\n    <Paper className={classes.root}>\n      <List\n        subheader={\n          <ListSubheader component=\"span\" disableSticky>\n            文章\n          </ListSubheader>\n        }\n      >\n        {res?.data.map(item => (\n          <ListItem button divider key={item.id}>\n            <ListItemText\n              primary={item.title}\n              primaryTypographyProps={{ color: \"textPrimary\" }}\n              secondary={item.content}\n              secondaryTypographyProps={{ color: \"textSecondary\" }}\n            />\n          </ListItem>\n        ))}\n        {!res && <ArticleSkeleton />}\n      </List>\n      <div className={classes.pagination}>\n        <Pagination\n          limit={numPerPage}\n          offset={offset}\n          total={100}\n          onClick={(e, newOffset): void => setOffset(newOffset)}\n        />\n      </div>\n    </Paper>\n  );\n}\n","import { Paper } from \"@material-ui/core\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport EventNoteIcon from \"@material-ui/icons/EventNote\";\nimport Pagination from \"material-ui-flat-pagination\";\nimport React, { useState } from \"react\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginRight: \"auto\",\n    width: \"100%\",\n    maxWidth: 300,\n    padding: theme.spacing(1)\n  },\n  pagination: {\n    textAlign: \"center\"\n  }\n}));\n\nconst numPerPage = 6;\n\nexport default function NestedList() {\n  const classes = useStyles();\n  const [offset, setOffset] = useState<number>(0);\n\n  return (\n    <Paper className={classes.root} elevation={4}>\n      <List\n        component=\"nav\"\n        dense\n        subheader={\n          <ListSubheader component=\"div\" disableSticky>\n            通知\n          </ListSubheader>\n        }\n      >\n        {[1, 2, 3, 4, 5, 6].map(item => (\n          <ListItem button key={item + offset}>\n            <ListItemIcon>\n              <EventNoteIcon />\n            </ListItemIcon>\n            <ListItemText\n              primary={`通知 ${item + offset}`}\n              primaryTypographyProps={{ color: \"textPrimary\" }}\n            />\n          </ListItem>\n        ))}\n      </List>\n      <div className={classes.pagination}>\n        <Pagination\n          reduced\n          limit={numPerPage}\n          offset={offset}\n          total={60}\n          onClick={(e, newOffset): void => setOffset(newOffset)}\n        />\n      </div>\n    </Paper>\n  );\n}\n","import {\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Container\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport React from \"react\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    margin: 15\n  }\n}));\n\nexport default function PaperSheet() {\n  const classes = useStyles();\n\n  return (\n    <ExpansionPanel className={classes.root}>\n      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n        <Typography variant=\"subtitle1\">通知</Typography>\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Container>\n          <Skeleton />\n          <Skeleton width=\"60%\" />\n        </Container>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n","// 主页\nimport React from \"react\";\nimport { Grid, Hidden } from \"@material-ui/core\";\nimport Slides from \"./components/Slides\";\nimport Articles from \"./components/Articles\";\nimport Notifications from \"./components/Notifications\";\nimport NotificationsMobile from \"./components/NotificationsMobile\";\n\nexport default function Index(): JSX.Element {\n  return (\n    <>\n      <Grid container justify=\"center\">\n        <Hidden smUp>\n          <Grid item xs={12}>\n            <NotificationsMobile />\n          </Grid>\n        </Hidden>\n        <Grid item xs={12} md={8}>\n          <Slides />\n        </Grid>\n        <Grid item xs={12} sm={8}>\n          <Articles />\n        </Grid>\n        <Hidden xsDown>\n          <Grid item xs={12} sm={4}>\n            <Notifications />\n          </Grid>\n        </Hidden>\n      </Grid>\n    </>\n  );\n}\n","import { CircularProgress } from \"@material-ui/core\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport React, { lazy, Suspense } from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport GlobalState from \"./context/GlobalState\";\nimport NavBar from \"./components/Navbar\";\nimport Footer from \"./components/Footer\";\nimport IndexPage from \"./pages/index/Index\";\nimport { PagePath, AdminAccess } from \"./types\";\nimport { AuthRoute } from \"./components/AuthRoute\";\n\nconst NotFoundPage = lazy(() => import(\"./pages/notFound/Index\"));\nconst AboutPage = lazy(() => import(\"./pages/about/Index\"));\nconst CheckPage = lazy(() => import(\"./pages/check/Index\"));\nconst ComplainPage = lazy(() => import(\"./pages/complain/Index\"));\nconst LankePage = lazy(() => import(\"./pages/lanke/Index\"));\nconst RepairPage = lazy(() => import(\"./pages/repair/Index\"));\nconst SuggestPage = lazy(() => import(\"./pages/suggest/Index\"));\nconst WechatPage = lazy(() => import(\"./pages/wechat/Index\"));\nconst AdminPage = lazy(() => import(\"./pages/admin/Index\"));\n\nfunction App(): JSX.Element {\n  const darkThemeSys = useMediaQuery(\"(prefers-color-scheme: dark)\", {\n    noSsr: true\n  });\n  const theme = createMuiTheme({\n    palette: {\n      primary: {\n        main: \"#0D56A6\"\n      },\n      secondary: {\n        main: \"#00acc1\"\n      },\n      type: darkThemeSys ? \"dark\" : \"light\"\n    }\n  });\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <GlobalState>\n        <BrowserRouter>\n          <CssBaseline />\n\n          {/* place holder for sticky footer */}\n          <div style={{ minHeight: \"calc(100vh - 176px)\" }}>\n            <NavBar />\n            <Suspense fallback={<CircularProgress />}>\n              <Switch>\n                <Route path={PagePath.Index} exact component={IndexPage} />\n                <Route path={PagePath.About} component={AboutPage} />\n                <Route path={PagePath.Check} component={CheckPage} />\n                <Route path={PagePath.Complain} component={ComplainPage} />\n                <Route path={PagePath.Lanke} component={LankePage} />\n                <Route path={PagePath.Suggest} component={SuggestPage} />\n                <Route path={PagePath.Wechat} component={WechatPage} />\n                <AuthRoute // [需认证]报修页面\n                  pageAccessCode={AdminAccess.Dashboard}\n                  path={PagePath.Repair}\n                >\n                  <RepairPage />\n                </AuthRoute>\n                <Route path={PagePath.Admin} component={AdminPage} />\n                {/* No Match */}\n                <Route component={NotFoundPage} />\n              </Switch>\n            </Suspense>\n          </div>\n\n          <Footer />\n        </BrowserRouter>\n      </GlobalState>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { Identity } from \"../types\";\n// import jwt_decode from \"jwt-decode\";\n\nexport const LOGIN = \"LOGIN\";\nexport const LOGOUT = \"LOGOUT\";\n\nexport const initialState = {\n  loggedIn: false,\n  userId: -1,\n  accessCode: 0,\n  identity: Identity.None,\n  expires: 0\n};\n\nexport const userReducer = (state, action) => {\n  switch (action.type) {\n    case LOGIN:\n      localStorage.setItem(\"authInfo\", action.token);\n      return {\n        ...state,\n        // eslint-disable-next-line no-undef\n        // ...jwt_decode(action.token),\n        loggedIn: true,\n        userId: 1,\n        identity: Identity.ROOT,\n        // accessCode: 0b01111111,\n        accessCode: 0b011111111,\n        expires: 99999999999\n      };\n    case LOGOUT:\n      localStorage.removeItem(\"authInfo\");\n      return initialState;\n    default:\n      return state;\n  }\n};\n","import React, { useReducer } from \"react\";\nimport { RestfulProvider } from \"restful-react\";\nimport { userReducer, LOGIN, LOGOUT, initialState } from \"./Reducer\";\nimport { AuthInfoProps, GlobalContextProps, Identity } from \"../types\";\n\nconst loginInit = (token: string): void => {\n  return;\n};\n\nconst logoutInit = (): void => {\n  return;\n};\n\nexport const authInfoContext = React.createContext<GlobalContextProps>({\n  authInfo: initialState,\n  login: loginInit,\n  logout: logoutInit\n});\n\nfunction getAuthInfo(): AuthInfoProps | null {\n  const token = localStorage.getItem(\"authInfo\");\n  if (token) {\n    // parse token\n    return {\n      loggedIn: true,\n      userId: 1,\n      identity: Identity.ROOT,\n      // accessCode: 0b01111111,\n      accessCode: 0b011111111,\n      expires: 99999999999\n    };\n  }\n  return null;\n}\n\nconst GlobalState = ({ children }: { children: JSX.Element }): JSX.Element => {\n  const [authInfo, dispatch] = useReducer(\n    userReducer,\n    getAuthInfo() || initialState\n  );\n\n  const login = (token: string): void => {\n    dispatch({ type: LOGIN, token });\n  };\n\n  const logout = (): void => {\n    dispatch({ type: LOGOUT });\n  };\n\n  return (\n    <authInfoContext.Provider\n      value={{\n        authInfo,\n        login,\n        logout\n      }}\n    >\n      <RestfulProvider base={process.env.REACT_APP_DOMAIN as string}>\n        {children}\n      </RestfulProvider>\n    </authInfoContext.Provider>\n  );\n};\n\nexport default GlobalState;\n","import { ListItemIcon, MenuItem } from \"@material-ui/core\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FingerprintIcon from \"@material-ui/icons/Fingerprint\";\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\";\nimport React, { useContext } from \"react\";\nimport { authInfoContext } from \"../context/GlobalState\";\n\nexport default function LoginDialog() {\n  const [open, setOpen] = React.useState(false);\n  const context = useContext(authInfoContext);\n  const { authInfo } = context;\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleLogin = () => {\n    context.login(\"token\");\n    handleClose();\n  };\n\n  const handleLogout = () => {\n    context.logout();\n  };\n\n  function LoginAndOut() {\n    if (authInfo.loggedIn) {\n      return (\n        <MenuItem\n          onClick={() => {\n            handleLogout();\n          }}\n        >\n          <ListItemIcon>\n            <PowerSettingsNewIcon />\n          </ListItemIcon>\n          登出\n        </MenuItem>\n      );\n    }\n    return (\n      <MenuItem\n        onClick={() => {\n          handleClickOpen();\n        }}\n      >\n        <ListItemIcon>\n          <FingerprintIcon />\n        </ListItemIcon>\n        登录\n      </MenuItem>\n    );\n  }\n\n  return (\n    <div>\n      <LoginAndOut />\n      <Dialog open={open} onClose={handleClose}>\n        <DialogTitle>登录</DialogTitle>\n        <DialogContent>\n          <DialogContentText>用户名密码与校园网账号相同</DialogContentText>\n          <TextField\n            // autoFocus\n            margin=\"dense\"\n            id=\"account\"\n            label=\"账号\"\n            type=\"text\"\n            fullWidth\n          />\n          <TextField\n            margin=\"dense\"\n            id=\"pswd\"\n            label=\"密码\"\n            type=\"password\"\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"default\">\n            取消\n          </Button>\n          <Button onClick={handleLogin} color=\"primary\">\n            登录\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","export interface AuthInfoProps {\n  loggedIn: boolean;\n  userId: number;\n  identity: Identity;\n  accessCode: number;\n  expires: number;\n}\n\nexport interface GlobalContextProps {\n  authInfo: AuthInfoProps;\n  login: (token: string) => void;\n  logout: () => void;\n}\n\nexport interface AuthRouteProps {\n  children: JSX.Element;\n  path: string;\n  pageAccessCode: AdminAccess;\n  exact?: boolean;\n}\n\nexport interface NavbarAdminItemProps {\n  label: string;\n  to: string;\n  icon: JSX.Element;\n  pageAccessCode: AdminAccess;\n  showDivider?: boolean;\n}\n\nexport enum PagePath {\n  Index = \"/\",\n  About = \"/about\",\n  Check = \"/check\",\n  Complain = \"/complain\",\n  Lanke = \"/lanke\",\n  Repair = \"/repair\",\n  Suggest = \"/suggest\",\n  Wechat = \"/wechat\",\n  Admin = \"/admin\"\n}\n\nexport enum PageLabel {\n  Index = \"首页\",\n  About = \"关于我们\",\n  Check = \"状态查询\",\n  Complain = \"投诉蓝客\",\n  Lanke = \"蓝客风采\",\n  Repair = \"故障报修\",\n  Suggest = \"意见建议\",\n  Wechat = \"公众号\",\n  Admin = \"后台\"\n}\n\nexport enum Identity {\n  None = \"none\",\n  USER = \"user\",\n  LANKE = \"lanke\",\n  LANKE_ADMIN = \"lankeAdmin\",\n  SUPER_ADMIN = \"superAdmin\",\n  ROOT = \"root\"\n}\n\nexport enum AdminAccess {\n  None = 0,\n  Dashboard = 1 << 0,\n  ModifyUserInfo = 1 << 1,\n  RepairUnreceived = 1 << 2,\n  RepairReceived = 1 << 2,\n  CommentManagement = 1 << 6,\n  Publish = 1 << 3,\n  UserManage = 1 << 4,\n  ApplyManage = 1 << 5,\n  CreditManage = 1 << 6,\n  Maintenance = 1 << 7\n}\n"],"sourceRoot":""}